#! /usr/bin/perl
# PODNAME: tapper-notify-daemon
# ABSTRACT: cmdline frontend to Tapper::Notification/daemonize

use strict;
use warnings;

# TODO: redirect STDERR/STDOUT

use Tapper::Notification;
use App::Daemon 'daemonize';
$App::Daemon::as_user = "root";
$App::Daemon::logfile = $ENV{HARNESS_ACTIVE} ? "/tmp/tapper-notification-daemon.log" : '/var/log/tapper-notification-daemon.log';
$App::Daemon::pidfile = "/tmp/tapper-notification-daemon.pid";
daemonize();
my $daemon = Tapper::Notification->new;
$daemon->loop;

